import Head from 'next/head'
import { Inter } from '@next/font/google'
import NavBar from '@/components/NavBar'
import PageTitle from '@/components/PageTitle'
import Feed from '@/components/Feed'
import ControlBar from '@/components/ControlBar'
import { createRef, useState } from 'react'
import Track from '@/components/Track'
import { TrackType } from '@/lib/types'

const inter = Inter({ subsets: ['latin'] })

interface IndexProps {
  tracks: TrackType[];
}

export default function Home() {
  /* Tracks */
  /* const track1:TrackType = {id: 1, name: "song1", source: "/song1.mp3"}
  const track2:TrackType = {id: 2, name: "song2", source: "/song2.mp3"}

  const tracks:TrackType[] = [track1, track2] */
 
  /* States */
  const [isPlaying, setIsPlaying] = useState<boolean>(false)
  const [currentTrack, setCurrentTrack] = useState<TrackType>({
    title: '',
    artist: '',
    source:''
  });

  /* References */
  const audioRef = createRef<HTMLAudioElement>()

  const playTrack = (track: TrackType) => {
    setCurrentTrack(track);
    setIsPlaying(true);
    if (audioRef.current) {
      audioRef.current.play();
    }
  };

  const pauseTrack = () => {
    setIsPlaying(false);
    if (audioRef.current) {
      audioRef.current.pause();
    }
  };

  return (
    <>
      <Head>
        <title>POLP</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        {/* <link rel="icon" href="/favicon.ico" /> */}
      </Head>
      <main className="bg-cream h-screen">
        {/* Audio */}
        <audio ref={audioRef} src={currentTrack.source} />

        <NavBar />
        <PageTitle />
        <Feed 
          /* tracks={tracks}
          currentTrack={currentTrack}
          setCurrentTrack={setCurrentTrack}
          
          audioRef={audioRef} */
          setIsPlaying={setIsPlaying}
          isPlaying={isPlaying}
          playTrack={playTrack}
          pauseTrack={pauseTrack}
        />
        <ControlBar />
      </main>
    </>
  )
}
